<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Import D·ªØ li·ªáu</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
</head>
<body>
<div class="layout">
    <aside class="sidebar">
        <div class="logo">Kid Nani</div>
        <nav>
            <a th:href="@{/dashboard}">Trang ch√≠nh</a>
            <a th:href="@{/lessons}">T·∫•t c·∫£ b√†i h·ªçc</a>
            <a th:href="@{/mywords}">S·ªï tay t·ª´ v·ª±ng</a>
            <a th:href="@{/practice}">√în t·∫≠p</a>
            <a th:href="@{/minigame}">Mini game</a>
            <a th:href="@{/leaderboard}">B·∫£ng x·∫øp h·∫°ng</a>
            <a th:href="@{/shop}">C·ª≠a h√†ng tim</a>
            <a th:href="@{/logout}">ƒêƒÉng xu·∫•t</a>
        </nav>
    </aside>
    <main class="main">
        <h1>üì• Import D·ªØ li·ªáu B√†i h·ªçc</h1>
        
        <div th:if="${success}" class="success" style="margin: 20px 0; padding: 15px; background: #D1FAE5; color: #065F46; border-radius: 8px; border: 2px solid #10B981;">
            <strong>‚úì</strong> <span th:text="${success}"></span>
        </div>
        
        <div th:if="${warning}" style="margin: 20px 0; padding: 15px; background: #FEF3C7; color: #92400E; border-radius: 8px; border: 2px solid #F59E0B;">
            <strong>‚ö†Ô∏è</strong> <span th:text="${warning}"></span>
        </div>
        
        <div th:if="${error}" class="error" style="margin: 20px 0; padding: 15px; background: #FEE2E2; color: #991B1B; border-radius: 8px; border: 2px solid #EF4444;">
            <strong>‚úó</strong> <span th:text="${error}"></span>
        </div>

        <div class="panel" style="margin: 20px 0;">
            <h3>Import t·ª´ file JSON</h3>
            <p>Ch·ªçn file JSON ch·ª©a d·ªØ li·ªáu b√†i h·ªçc v√† ng·ªØ ph√°p ƒë·ªÉ import v√†o h·ªá th·ªëng.</p>
            
            <form method="post" th:action="@{/admin/import}" enctype="multipart/form-data" style="margin-top: 20px;">
                <label style="display: block; margin-bottom: 15px;">
                    <strong>Ch·ªçn file JSON:</strong>
                    <input type="file" name="file" accept=".json" required 
                           style="margin-top: 8px; padding: 10px; width: 100%; border: 2px solid #E5E7EB; border-radius: 8px;">
                </label>
                <button type="submit" class="btn-main big">üì• Import D·ªØ li·ªáu</button>
            </form>
        </div>

        <div class="panel" style="background: #F0FDF4; border: 2px solid #58CC02;">
            <h3 style="color: #059669;">üìã Format JSON m·∫´u:</h3>
            <pre style="background: white; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 13px;"><code>{
  "lessons": [
    {
      "title": "Lesson title",
      "description": "Description",
      "level": "GRADE3",
      "lessonType": "VOCABULARY",
      "contentHtml": "&lt;ul&gt;&lt;li&gt;word ‚Äì nghƒ©a&lt;/li&gt;&lt;/ul&gt;",
      "orderIndex": 0,
      "partName": "PH·∫¶N 1, C·ª¨A 1",
      "xpReward": 10
    }
  ],
  "grammar": [
    {
      "title": "Grammar title",
      "description": "Description",
      "level": "GRADE3",
      "topic": "Present Simple",
      "contentHtml": "Grammar explanation...",
      "examples": "I play, You play, He plays",
      "orderIndex": 1,
      "partName": "PH·∫¶N 1, C·ª¨A 2",
      "xpReward": 15
    }
  ]
}</code></pre>
            <p style="margin-top: 15px; color: #059669;">
                <strong>L∆∞u √Ω:</strong> File JSON m·∫´u c√≥ s·∫µn t·∫°i: <code>lessons_data_grade345.json</code>
            </p>
        </div>

        <!-- Section: Import t·ª´ v·ª±ng ETS 2024 -->
        <div class="panel" style="margin: 30px 0; background: #EFF6FF; border: 2px solid #3B82F6;">
            <h3 style="color: #1E40AF; margin-top: 0;">üìö Import T·ª´ v·ª±ng ETS 2024</h3>
            <p style="color: #1E40AF;">Import t·ª´ v·ª±ng t·ª´ c√°c file CSV trong th∆∞ m·ª•c <code>Tieng-Anh</code> (LISTENING v√† READING)</p>
            
            <!-- Th·ªëng k√™ -->
            <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0; border: 1px solid #DBEAFE;">
                <h4 style="margin-top: 0; color: #1E40AF;">üìä Th·ªëng k√™ t·ª´ v·ª±ng hi·ªán t·∫°i:</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
                    <div style="text-align: center; padding: 0.75rem; background: #F3F4F6; border-radius: 6px;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: #1F2937;" th:text="${vocabularyCount}">0</div>
                        <div style="font-size: 0.875rem; color: #6B7280;">T·ªïng t·ª´ v·ª±ng</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: #FEE2E2; border-radius: 6px;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: #DC2626;" th:text="${listeningCount}">0</div>
                        <div style="font-size: 0.875rem; color: #991B1B;">LISTENING</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: #DBEAFE; border-radius: 6px;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: #2563EB;" th:text="${readingCount}">0</div>
                        <div style="font-size: 0.875rem; color: #1E40AF;">READING</div>
                    </div>
                    <div style="text-align: center; padding: 0.75rem; background: #D1FAE5; border-radius: 6px;" th:if="${estimatedLessons > 0}">
                        <div style="font-size: 1.5rem; font-weight: bold; color: #059669;" th:text="${estimatedLessons}">0</div>
                        <div style="font-size: 0.875rem; color: #065F46;">B√†i h·ªçc c√≥ th·ªÉ t·∫°o</div>
                    </div>
                </div>
            </div>

            <!-- Form import t·ª´ v·ª±ng -->
            <form method="post" th:action="@{/admin/import/vocabulary}" style="margin-top: 20px;">
                <div style="background: #FEF3C7; border: 2px solid #F59E0B; border-radius: 8px; padding: 15px; margin: 15px 0;">
                    <strong>üí° H∆∞·ªõng d·∫´n:</strong>
                    <ul style="margin: 10px 0 0 20px; color: #92400E;">
                        <li>ƒê·∫£m b·∫£o th∆∞ m·ª•c <code>Tieng-Anh</code> n·∫±m trong th∆∞ m·ª•c <code>backend-java</code></li>
                        <li>Th∆∞ m·ª•c ph·∫£i ch·ª©a 2 th∆∞ m·ª•c con: <code>ETS 2024 ‚Äì LISTENING</code> v√† <code>ETS 2024 READING</code></li>
                        <li>M·ªói th∆∞ m·ª•c con ch·ª©a 10 file CSV: <code>TEST 1.csv</code> ƒë·∫øn <code>TEST 10.csv</code></li>
                        <li>Sau khi import, b·∫°n c√≥ th·ªÉ t·∫°o b√†i h·ªçc t·ª´ t·ª´ v·ª±ng b·∫±ng n√∫t b√™n d∆∞·ªõi</li>
                    </ul>
                </div>

                <div style="margin: 20px 0;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 10px; background: white; border: 2px solid #3B82F6; border-radius: 8px;">
                        <input type="checkbox" name="importAll" value="true" style="width: 20px; height: 20px; cursor: pointer;">
                        <strong style="color: #1E40AF;">Import t·∫•t c·∫£ t·ª´ v·ª±ng t·ª´ th∆∞ m·ª•c Tieng-Anh</strong>
                    </label>
                </div>

                <div style="margin: 20px 0; border-top: 1px solid #DBEAFE; padding-top: 20px;">
                    <p style="color: #1E40AF; margin-bottom: 15px;"><strong>Ho·∫∑c upload file CSV c·ª• th·ªÉ:</strong></p>
                    <label style="display: block; margin-bottom: 10px;">
                        <strong>Ch·ªçn file CSV:</strong>
                        <input type="file" name="file" accept=".csv" 
                               style="margin-top: 8px; padding: 10px; width: 100%; border: 2px solid #E5E7EB; border-radius: 8px;">
                    </label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 10px;">
                        <label>
                            <strong>Lo·∫°i test:</strong>
                            <select name="testType" style="margin-top: 8px; padding: 10px; width: 100%; border: 2px solid #E5E7EB; border-radius: 8px;">
                                <option value="">-- Ch·ªçn --</option>
                                <option value="LISTENING">LISTENING</option>
                                <option value="READING">READING</option>
                            </select>
                        </label>
                        <label>
                            <strong>S·ªë test (1-10):</strong>
                            <input type="number" name="testNumber" min="1" max="10" 
                                   style="margin-top: 8px; padding: 10px; width: 100%; border: 2px solid #E5E7EB; border-radius: 8px;">
                        </label>
                    </div>
                </div>

                <button type="submit" class="btn-main big" style="background: #3B82F6; border-color: #3B82F6; margin-top: 15px;">
                    üì• Import T·ª´ v·ª±ng
                </button>
            </form>
        </div>

        <!-- Section: T·∫°o b√†i h·ªçc theo c·∫•u tr√∫c √¥ c·ª≠a (Gate) -->
        <div class="panel" style="margin: 30px 0; background: #F0FDF4; border: 2px solid #10B981;" th:if="${vocabularyCount > 0}">
            <h3 style="color: #059669; margin-top: 0;">üö™ T·∫°o B√†i h·ªçc theo C·∫•u tr√∫c √î c·ª≠a</h3>
            <p style="color: #065F46;">
                T·∫°o b√†i h·ªçc theo c·∫•u tr√∫c 5 √¥ c·ª≠a. M·ªói test ƒë∆∞·ª£c chia nh·ªè th√†nh 10 b√†i (test1.1, test1.2, ... test1.10) ƒë·ªÉ d·ªÖ h·ªçc.
            </p>
            
            <div style="background: #D1FAE5; border: 2px solid #10B981; border-radius: 8px; padding: 15px; margin: 15px 0;">
                <strong>‚ú® C·∫•u tr√∫c √¥ c·ª≠a:</strong>
                <ul style="margin: 10px 0 0 20px; color: #065F46;">
                    <li><strong>√î c·ª≠a 1 (GRADE1):</strong> Test 1-20 ‚Üí M·ªói test chia th√†nh 10 b√†i nh·ªè</li>
                    <li><strong>√î c·ª≠a 2 (GRADE2):</strong> Test 21-40 ‚Üí M·ªói test chia th√†nh 10 b√†i nh·ªè</li>
                    <li><strong>√î c·ª≠a 3 (GRADE3):</strong> Test 41-60 ‚Üí M·ªói test chia th√†nh 10 b√†i nh·ªè</li>
                    <li><strong>√î c·ª≠a 4 (GRADE4):</strong> Test 61-80 ‚Üí M·ªói test chia th√†nh 10 b√†i nh·ªè</li>
                    <li><strong>√î c·ª≠a 5 (GRADE5):</strong> Test 81-100 ‚Üí M·ªói test chia th√†nh 10 b√†i nh·ªè</li>
                    <li>M·ªói b√†i h·ªçc s·∫Ω c√≥ <strong>15 XP</strong> v√† t·ª± ƒë·ªông t·∫°o quiz</li>
                    <li>Sau khi ho√†n th√†nh h·∫øt b√†i trong m·ªôt √¥ c·ª≠a, nh·∫≠n r∆∞∆°ng th∆∞·ªüng v√† m·ªü kh√≥a √¥ c·ª≠a ti·∫øp theo</li>
                </ul>
            </div>

            <form method="post" th:action="@{/admin/import/create-gate-lessons}" 
                  style="margin-top: 20px;">
                <button type="submit" class="btn-main big" style="background: #10B981; border-color: #10B981; width: 100%;"
                        onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën t·∫°o b√†i h·ªçc theo c·∫•u tr√∫c √¥ c·ª≠a? H·ªá th·ªëng s·∫Ω chia nh·ªè m·ªói test th√†nh 10 b√†i h·ªçc.');">
                    üö™ T·∫°o B√†i h·ªçc theo C·∫•u tr√∫c √î c·ª≠a
                </button>
            </form>

            <p style="margin-top: 15px; color: #059669; font-size: 0.875rem;">
                <strong>L∆∞u √Ω:</strong> H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông b·ªè qua c√°c b√†i h·ªçc ƒë√£ t·ªìn t·∫°i. 
                M·ªói test s·∫Ω ƒë∆∞·ª£c chia th√†nh 10 b√†i nh·ªè ƒë·ªÉ h·ªçc sinh d·ªÖ h·ªçc h∆°n.
            </p>
        </div>

        <!-- Section: T·∫°o b√†i h·ªçc t·ª´ t·ª´ v·ª±ng (c√°ch c≈©) -->
        <div class="panel" style="margin: 30px 0; background: #FEF3C7; border: 2px solid #F59E0B;" th:if="${vocabularyCount > 0}">
            <h3 style="color: #92400E; margin-top: 0;">üéì T·∫°o B√†i h·ªçc t·ª´ T·ª´ v·ª±ng ETS (C√°ch c≈©)</h3>
            <p style="color: #92400E;">
                T·ª± ƒë·ªông t·∫°o c√°c b√†i h·ªçc trong l·ªô tr√¨nh h·ªçc t·ª´ t·ª´ v·ª±ng ETS ƒë√£ import. 
                H·ªá th·ªëng s·∫Ω nh√≥m t·ª´ v·ª±ng theo TEST v√† Part ƒë·ªÉ t·∫°o b√†i h·ªçc.
            </p>
            
            <div style="background: #FEF3C7; border: 2px solid #F59E0B; border-radius: 8px; padding: 15px; margin: 15px 0;">
                <strong>‚ö†Ô∏è L∆∞u √Ω:</strong> C√°ch n√†y t·∫°o b√†i h·ªçc theo c·∫•u tr√∫c c≈©. 
                Khuy·∫øn ngh·ªã s·ª≠ d·ª•ng "T·∫°o B√†i h·ªçc theo C·∫•u tr√∫c √î c·ª≠a" ·ªü tr√™n.
            </div>

            <form method="post" th:action="@{/admin/import/vocabulary-to-lessons}" 
                  id="createLessonsForm"
                  style="margin-top: 20px;">
                <button type="submit" class="btn-main big" style="background: #F59E0B; border-color: #F59E0B; width: 100%;"
                        th:onclick="'return confirm(\'B·∫°n c√≥ ch·∫Øc mu·ªën t·∫°o b√†i h·ªçc t·ª´ t·ª´ v·ª±ng ETS? H·ªá th·ªëng s·∫Ω t·∫°o kho·∫£ng ' + ${estimatedLessons} + ' b√†i h·ªçc m·ªõi.\');'">
                    üéì T·∫°o B√†i h·ªçc t·ª´ T·ª´ v·ª±ng ETS (C√°ch c≈©)
                </button>
            </form>
        </div>

        <!-- Section: T·∫°o Quiz cho b√†i h·ªçc ƒë√£ t·ªìn t·∫°i -->
        <div class="panel" style="margin: 30px 0; background: #EFF6FF; border: 2px solid #3B82F6;" th:if="${vocabularyCount > 0}">
            <h3 style="color: #1E40AF; margin-top: 0;">üìù T·∫°o Quiz cho B√†i h·ªçc ETS</h3>
            <p style="color: #1E40AF;">
                T·∫°o quiz questions (mini test) cho c√°c b√†i h·ªçc ETS ƒë√£ t·ªìn t·∫°i nh∆∞ng ch∆∞a c√≥ quiz.
                M·ªói b√†i h·ªçc s·∫Ω c√≥ t·ªëi ƒëa 10 c√¢u h·ªèi v·ªÅ nghƒ©a c·ªßa t·ª´ v·ª±ng.
            </p>
            
            <div style="background: #DBEAFE; border: 2px solid #3B82F6; border-radius: 8px; padding: 15px; margin: 15px 0;">
                <strong>üí° Th√¥ng tin:</strong>
                <ul style="margin: 10px 0 0 20px; color: #1E40AF;">
                    <li>H·ªá th·ªëng s·∫Ω t√¨m t·∫•t c·∫£ b√†i h·ªçc ETS (LISTENING/READING TEST v√† Part)</li>
                    <li>Ch·ªâ t·∫°o quiz cho c√°c b√†i h·ªçc ch∆∞a c√≥ quiz</li>
                    <li>M·ªói b√†i h·ªçc s·∫Ω c√≥ t·ªëi ƒëa 10 c√¢u h·ªèi tr·∫Øc nghi·ªám</li>
                    <li>C√¢u h·ªèi d·∫°ng: "T·ª´ [word] c√≥ nghƒ©a l√† g√¨?"</li>
                </ul>
            </div>

            <form method="post" th:action="@{/admin/import/create-quiz-for-lessons}" 
                  style="margin-top: 20px;">
                <button type="submit" class="btn-main big" style="background: #3B82F6; border-color: #3B82F6; width: 100%;"
                        onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën t·∫°o quiz cho c√°c b√†i h·ªçc ETS ƒë√£ t·ªìn t·∫°i?');">
                    üìù T·∫°o Quiz cho B√†i h·ªçc ETS
                </button>
            </form>
        </div>

        <!-- Section: T·∫°o Quiz cho T·∫§T C·∫¢ B√†i h·ªçc -->
        <div class="panel" style="margin: 30px 0; background: #F0FDF4; border: 2px solid #10B981;">
            <h3 style="color: #059669; margin-top: 0;">üéØ T·∫°o Quiz cho T·∫§T C·∫¢ B√†i h·ªçc</h3>
            <p style="color: #065F46;">
                T·ª± ƒë·ªông t·∫°o quiz (mini test) cho <strong>T·∫§T C·∫¢</strong> c√°c b√†i h·ªçc ch∆∞a c√≥ quiz.
                H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ph√¢n t√≠ch n·ªôi dung b√†i h·ªçc ƒë·ªÉ t·∫°o c√¢u h·ªèi.
            </p>
            
            <div style="background: #D1FAE5; border: 2px solid #10B981; border-radius: 8px; padding: 15px; margin: 15px 0;">
                <strong>‚ú® T√≠nh nƒÉng:</strong>
                <ul style="margin: 10px 0 0 20px; color: #065F46;">
                    <li>T·ª± ƒë·ªông t·∫°o quiz cho <strong>T·∫§T C·∫¢</strong> b√†i h·ªçc (kh√¥ng ch·ªâ ETS)</li>
                    <li>Ph√¢n t√≠ch n·ªôi dung HTML ƒë·ªÉ tr√≠ch xu·∫•t t·ª´ v·ª±ng</li>
                    <li>H·ªó tr·ª£ nhi·ªÅu format: "word ‚Äì meaning", "word: meaning", HTML lists</li>
                    <li>M·ªói b√†i h·ªçc s·∫Ω c√≥ t·ªëi ƒëa 10 c√¢u h·ªèi tr·∫Øc nghi·ªám</li>
                    <li>Ch·ªâ t·∫°o quiz cho c√°c b√†i h·ªçc ch∆∞a c√≥ quiz</li>
                    <li>T·ª± ƒë·ªông t·∫°o quiz khi import b√†i h·ªçc m·ªõi</li>
                </ul>
            </div>

            <form method="post" th:action="@{/admin/import/create-quiz-for-all-lessons}" 
                  style="margin-top: 20px;">
                <button type="submit" class="btn-main big" style="background: #10B981; border-color: #10B981; width: 100%;"
                        onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën t·∫°o quiz cho T·∫§T C·∫¢ c√°c b√†i h·ªçc ch∆∞a c√≥ quiz? Qu√° tr√¨nh n√†y c√≥ th·ªÉ m·∫•t v√†i ph√∫t.');">
                    üéØ T·∫°o Quiz cho T·∫§T C·∫¢ B√†i h·ªçc
                </button>
            </form>
        </div>

        <div class="panel" style="margin: 30px 0; background: #FEF3C7; border: 2px solid #F59E0B;" th:if="${vocabularyCount == 0}">
            <h3 style="color: #92400E; margin-top: 0;">‚ö†Ô∏è Ch∆∞a c√≥ t·ª´ v·ª±ng</h3>
            <p style="color: #92400E;">
                B·∫°n c·∫ßn import t·ª´ v·ª±ng tr∆∞·ªõc khi c√≥ th·ªÉ t·∫°o b√†i h·ªçc. 
                H√£y s·ª≠ d·ª•ng form "Import T·ª´ v·ª±ng ETS 2024" ·ªü tr√™n.
            </p>
        </div>
    </main>
</div>
</body>
</html>

