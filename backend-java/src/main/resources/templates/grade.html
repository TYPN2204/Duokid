<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lá»™ trÃ¬nh</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
    <script src="/grade-dropdown.js" defer></script>
</head>
<body>
<div class="layout">
    <header class="top-nav">
        <div class="logo">duokid</div>
        <nav>
            <a th:href="@{/dashboard}">ğŸ  Há»ŒC</a>
            <span class="menu-divider"></span>
            <div class="grade-dropdown">
                <span class="grade-dropdown-trigger">ğŸ“š Lá»›p há»c</span>
                <div class="grade-dropdown-menu">
                    <a th:href="@{/grade/GRADE1}" 
                       th:classappend="${grade == 'GRADE1'} ? 'active' : ''">Lá»›p 1</a>
                    <a th:href="@{/grade/GRADE2}" 
                       th:classappend="${grade == 'GRADE2'} ? 'active' : ''">Lá»›p 2</a>
                    <a th:href="@{/grade/GRADE3}" 
                       th:classappend="${grade == 'GRADE3'} ? 'active' : ''">Lá»›p 3</a>
                    <a th:href="@{/grade/GRADE4}" 
                       th:classappend="${grade == 'GRADE4'} ? 'active' : ''">Lá»›p 4</a>
                    <a th:href="@{/grade/GRADE5}" 
                       th:classappend="${grade == 'GRADE5'} ? 'active' : ''">Lá»›p 5</a>
                </div>
            </div>
            <span class="menu-divider"></span>
            <a th:href="@{/mywords}">ğŸ“ Sá»• tay</a>
            <a th:href="@{/vocabulary}">ğŸ“š Tá»« vá»±ng</a>
            <a th:href="@{/practice}">ğŸ”„ Ã”n táº­p</a>
            <a th:href="@{/minigame}">ğŸ® Mini game</a>
            <a th:href="@{/tests}">ğŸ“ BÃ i kiá»ƒm tra</a>
            <a th:href="@{/leaderboard}">ğŸ† Báº£ng xáº¿p háº¡ng</a>
            <a th:href="@{/shop}">ğŸ›’ Cá»­a hÃ ng</a>
            <a th:href="@{/chat}">ğŸ’¬ Chat</a>
            <a th:href="@{/profile}">ğŸ‘¤ Há»“ sÆ¡</a>
            <span class="menu-divider"></span>
            <a th:href="@{/logout}">ğŸšª ÄÄƒng xuáº¥t</a>
        </nav>
    </header>
    <main class="main">
        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 30px;">
            <h1 style="margin: 0;" th:text="'ğŸ“š Lá»™ trÃ¬nh ' + ${grade}">Lá»™ trÃ¬nh</h1>
            <span style="background: #E0F2FE; color: #0369A1; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600;"
                  th:text="${grade}">GRADE1</span>
        </div>
        
        <div style="background: #F0FDF4; border: 2px solid #10B981; border-radius: 12px; padding: 20px; margin-bottom: 30px;">
            <h3 style="margin: 0 0 10px 0; color: #059669;">ğŸ“– HÆ°á»›ng dáº«n</h3>
            <p style="margin: 0; color: #065F46; line-height: 1.6;">
                ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i lá»™ trÃ¬nh há»c cá»§a <strong th:text="${grade}">GRADE1</strong>! 
                Báº¡n cÃ³ thá»ƒ há»c tá»« vá»±ng vÃ  ngá»¯ phÃ¡p theo thá»© tá»±, hoáº·c chá»n báº¥t ká»³ bÃ i há»c nÃ o báº¡n muá»‘n.
                HoÃ n thÃ nh bÃ i há»c vÃ  lÃ m mini test Ä‘á»ƒ nháº­n XP vÃ  má»Ÿ khÃ³a bÃ i há»c tiáº¿p theo!
            </p>
        </div>
        
        <!-- Lessons Section -->
        <div th:if="${lessons != null and !lessons.isEmpty()}">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 30px; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #059669;">ğŸ“š BÃ i há»c tá»« vá»±ng 
                    <span style="font-size: 16px; color: #6B7280; font-weight: normal;" 
                          th:text="'(' + ${#lists.size(lessons)} + ' bÃ i)'">(0 bÃ i)</span>
                </h2>
            </div>
            <div class="lesson-grid">
                <div class="lesson-item" th:each="l, iterStat : ${lessons}">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <span style="background: #10B981; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 12px; font-size: 14px;"
                              th:text="${iterStat.index + 1}">1</span>
                        <h3 style="margin: 0; flex: 1;" th:text="${l.title}">Title</h3>
                    </div>
                    <p style="color: #6B7280; margin: 8px 0;" th:text="${l.description}">Desc</p>
                    <div style="margin: 10px 0; color: #6B7280; font-size: 14px; display: flex; gap: 15px;">
                        <span>ğŸ <strong style="color: #059669;" th:text="${l.xpReward}">10</strong> XP</span>
                        <span th:if="${l.partName}">ğŸ“ <span th:text="${l.partName}">Part</span></span>
                    </div>
                    <a class="btn-main" th:href="@{'/lessons/' + ${l.id}}" 
                       style="width: 100%; text-align: center; margin-top: 10px;">
                        ğŸ“– Há»c bÃ i
                    </a>
                </div>
            </div>
        </div>

        <!-- Grammar Section -->
        <div th:if="${grammarList != null and !grammarList.isEmpty()}">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 30px; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #3B82F6;">ğŸ“ BÃ i há»c ngá»¯ phÃ¡p
                    <span style="font-size: 16px; color: #6B7280; font-weight: normal;" 
                          th:text="'(' + ${#lists.size(grammarList)} + ' bÃ i)'">(0 bÃ i)</span>
                </h2>
            </div>
            <div class="lesson-grid">
                <div class="lesson-item" th:each="g, iterStat : ${grammarList}" 
                     style="border-left: 4px solid #3B82F6; background: linear-gradient(to right, #EFF6FF 0%, white 10%);">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        <span style="background: #3B82F6; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 12px; font-size: 14px;"
                              th:text="${iterStat.index + 1}">1</span>
                        <h3 style="margin: 0; flex: 1;" th:text="${g.title}">Grammar Title</h3>
                    </div>
                    <p style="color: #6B7280; margin: 8px 0;" th:text="${g.description}">Grammar Description</p>
                    <div style="margin: 10px 0; color: #6B7280; font-size: 14px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <span>ğŸ <strong style="color: #3B82F6;" th:text="${g.xpReward}">15</strong> XP</span>
                        <span th:if="${g.topic}">ğŸ“Œ <strong th:text="${g.topic}">Topic</strong></span>
                        <span th:if="${g.partName}">ğŸ“ <span th:text="${g.partName}">Part</span></span>
                    </div>
                    <a class="btn-main" th:href="@{'/grammar/' + ${g.id}}" 
                       style="background: #3B82F6; border-color: #3B82F6; width: 100%; text-align: center; margin-top: 10px;">
                        ğŸ“š Há»c ngá»¯ phÃ¡p
                    </a>
                </div>
            </div>
        </div>

        <!-- Empty State -->
        <div th:if="${(lessons == null or lessons.isEmpty()) and (grammarList == null or grammarList.isEmpty())}" 
             style="text-align: center; padding: 60px 20px; color: #6B7280;">
            <div style="font-size: 64px; margin-bottom: 20px;">ğŸ“š</div>
            <h3 style="color: #9CA3AF; margin-bottom: 10px;">ChÆ°a cÃ³ dá»¯ liá»‡u</h3>
            <p>Lá»™ trÃ¬nh há»c cho lá»›p nÃ y Ä‘ang Ä‘Æ°á»£c cáº­p nháº­t. Vui lÃ²ng quay láº¡i sau!</p>
            <p style="margin-top: 20px; font-size: 14px;">
                <a th:href="@{/admin/import}" style="color: #3B82F6; text-decoration: underline;">Import dá»¯ liá»‡u tá»« file JSON</a>
            </p>
        </div>
    </main>
</div>
</body>
</html>
